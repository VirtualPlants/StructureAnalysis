# -*-python-*-

from openalea.sconsx import config, environ
import os
pj = os.path.join
ALEASolution = config.ALEASolution

options = Options(['../options.py', 'options.py'], ARGUMENTS)
options.Add(BoolOption('with_test', 'build test modules', 0))
options.Add(BoolOption('with_efence', 'build tests with efence library', 0))

tools = ['boost_python', 'vplants.tool', 'install', 'alea']

env = ALEASolution(options, tools)

# Build stage
prefix = env['build_prefix']
SConscript(pj(prefix,"src/cpp/SConscript"),
           exports='env')
SConscript(pj(prefix,"src/wrapper/SConscript"),
           exports='env')

if env['with_test']:
    SConscript(pj(prefix,"test/cpp/SConscript"), exports="env")
